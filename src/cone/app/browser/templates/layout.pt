<tal:layout xmlns:tal="http://xml.zope.org/namespaces/tal"
            xmlns:ajax="http://namesspaces.bluedynamics.eu/ajax"
            xmlns:xlink="http://www.w3.org/1999/xlink"
            omit-tag="True">

  <div id="layout"
       ajax:action="layout:#layout:replace"
       ajax:bind="contextchanged"
       tal:define="config context.config">

    <nav class="topnav navbar-expand topnav-custom">
      <div class="container-fluid p-0" id="topnav-container">

        <div class="navbar-brand" id="cone-logo">
          <tal:logo replace="structure tile('logo')" />
        </div>

        <div class="p-3 font-light" id="mobile-menu">
          <button id="hamburger-menu-toggle" class="hamburgerMenu">
            <svg class="bi" width="2em" height="2em" fill="currentColor">
              <use xlink:href="static/bootstrap-icons/bootstrap-icons.svg#list"/>
            </svg>
          </button>
          <div id="mobile-menu-content">
            <div id="mobile-searchbar" class="searchbar">
              <tal:livesearch
                condition="config.livesearch"
                replace="structure tile('livesearch')" />
            </div>
            <div id="mobile-mainmenu" class="mainmenu expanded">
              <tal:mainmenu condition="config.mainmenu"
                            replace="structure tile('mainmenu')" />
            </div>
          </div>
        </div>

        <tal:version_old condition="True">
          <div id="topnav-mainmenu" class="mainmenu expanded">
            <tal:mainmenu
              condition="config.mainmenu"
              replace="structure tile('mainmenu')" />
          </div>
          <div id="topnav-searchbar" class="searchbar"> 
            <tal:livesearch
               condition="config.livesearch"
               replace="structure tile('livesearch')" />
          </div>
          <div class="nav-item user-account ms-3 user-account-old"
               id="user-account-old"
               tal:define="config context.config">
            <tal:personaltools condition="config.personaltools"
                               replace="structure tile('personaltools')" />
          </div>
          
        </tal:version_old>

        <tal:version_new condition="False">
          <tal:livesearch
            condition="config.livesearch"
            replace="structure tile('livesearch')" />

          <tal:toolbar_top
            condition="True"
            replace="structure tile('toolbar_top')" />
        </tal:version_new>

      </div>
    </nav>
    
    <div class="dropdown-menu-custom"
         id="mobile_menu"
         tal:condition="config.mainmenu">
    </div>

    <div class="d-flex" id="wrapper">

      <div class="dropdown-menu-custom"
           id="sidebar_left"
           tal:condition="config.sidebar_left">
        <tal:tiles repeat="tilename config.sidebar_left">
          <tal:tile replace="structure tile(tilename)" />
        </tal:tiles>
      </div>

      <div id="page-content-wrapper"
           class="container-fluid d-flex flex-column min-vh-100">

        <row tal:condition="config.pathbar">
          <tal:pathbar replace="structure tile('pathbar')" />
        </row>

        <div class="container-fluid me-1" id="content-wrapper">
          <div id="content"
               ajax:bind="contextchanged"
               ajax:action="content:#content:inner">
            <tal:content replace="structure tile(context.contenttile)" />
          </div>

          <tal:footer replace="structure tile('footer')" />
        </div>

      </div>
    </div>
  </div>


</tal:layout>
