<tal:mainmenu xmlns:tal="http://xml.zope.org/namespaces/tal"
              xmlns:ajax="http://namesspaces.bluedynamics.eu/ajax"
              omit-tag="True">

  <ul id="mainmenu"
      class="nav navbar-nav contextsensitiv"
      ajax:bind="contextchanged"
      ajax:action="mainmenu:#mainmenu:replace">

    <tal:item repeat="item context.menuitems">

      <li tal:define="css item['selected'] and 'active' or '';
                      css ' '.join([css, 'node-%s' % item['id']]);"
          tal:attributes="class css">

        <a href=""
           ajax:bind="click"
           ajax:target="${item['url']}"
           ajax:event="contextchanged:.contextsensitiv
                       contextchanged:#content"
           tal:attributes="href item['url'];
                           title item['description'];"
          ><span class="${item['icon']|nothing}"></span>
          <span tal:content="item['title'] | string:'&nbsp;'">Title</span></a>

      </li>

    </tal:item>

    <!-- XXX: check layout condition flag in tile class -->
    <tal:personaltools replace="structure tile('personaltools')" />

    <!-- XXX: check layout condition flag in tile class -->
    <tal:livesearch replace="structure tile('livesearch')" />

  </ul>

</tal:mainmenu>
