<tal:mainmenu xmlns:tal="http://xml.zope.org/namespaces/tal"
              xmlns:ajax="http://namesspaces.bluedynamics.eu/ajax"
              omit-tag="True">

<div id="main-menu">
    <ul id="mainmenu"
        class="navbar-nav list-unstyled"
        ajax:bind="contextchanged"
        ajax:action="mainmenu:#mainmenu:replace"
        tal:define="config context.config">
  
      <tal:item repeat="item context.menuitems">
  
        <tal:comment replace="None">Main menu item as link</tal:comment>
        <li tal:condition="not item['children']"
            tal:define="css item['selected'] and 'active' or '';
                        css css + 'nav-item topnav-element dropdown-submenu dropout-relative arrow-none';
                        css ' '.join([css, 'node-%s' % item['id']]);"
            tal:attributes="class css">

            <div class="dropdown">

            <a href="${item['url']}"
               class="nav-link dropdown-toggle"
               data-hover="dropdown"
               title="${item['description']}"
               ajax:bind="click"
               ajax:target="${item['target']}"
               ajax:event="contextchanged:#layout"
               ajax:path="href"
              >
              <i class="${item['icon']|nothing}"></i>
              <span tal:content="item['title'] | string:'&nbsp;'"
                    class="d-none d-xl-inline-block">Title
              </span>
            </a>
    
            <div class="d-xl-none dropdown-menu dropdown-menu-start dropdown-menu-custom dropdown-content collapse"
                 id="submenu-${item['id']}">
    
              <ul class="mainmenu-dropdown list-unstyled">
                <li>
                  <span tal:content="item['title'] | string:'&nbsp;'">
                    Title
                  </span>
                </li>
              </ul>
  
            </div>
          </div>
  
        </li>
  
        <tal:comment replace="None">Main menu item as dropdown</tal:comment>
        <li tal:condition="item['children']"
            tal:define="css item['selected'] and 'active' or '';
                        css css + 'nav-item topnav-element dropdown-submenu dropout-relative list-true';
                        css ' '.join([css, 'node-%s' % item['id']]);"
            tal:attributes="class css">

          <div class="dropdown">

            <a href="#submenu-${item['id']}"
               class="nav-link dropdown-toggle"
               data-hover="dropdown"
              >
              <i class="${item['icon']|nothing}"></i>
              <span tal:content="item['title'] | string:'&nbsp;'"
                    class="d-none d-xl-inline-block">Title
              </span>
            </a>
    
            <div class="dropdown-menu dropdown-menu-start dropdown-menu-custom dropdown-content collapse"
                 id="submenu-${item['id']}">
    
              <ul class="mainmenu-dropdown list-unstyled">
                <li>
                  <span class="d-inline-block d-xl-none"
                        tal:content="item['title'] | string:'&nbsp;'">
                    Title
                  </span>
                </li>
                <tal:li repeat="child item['children']">
                  <li tal:define="css child['selected'] and 'active' or '';"
                      tal:attributes="class css">
                    <a href="${child['url']}"
                       title="${child['description']}"
                       ajax:bind="click"
                       ajax:target="${child['target']}"
                       ajax:event="contextchanged:#layout"
                       ajax:path="href"
                      ><i class="${child['icon']|nothing}"></i>
                      <span tal:content="child['title'] | string:'&nbsp;'">Title</span></a>
                  </li>
                </tal:li>
              </ul>
  
            </div>
          </div>

        </li>
  
      </tal:item>

    </ul>
</div>

</tal:mainmenu>
